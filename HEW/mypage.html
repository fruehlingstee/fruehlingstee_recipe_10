<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>MyPage - Recipe2026</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
<nav>
    <a href="index.html" style="font-size:1.5rem; text-decoration:none;"><img src="images/C'est trop bon logo.png" alt="" style="width: 80px;"></a>
    <div class="nav-links">
        <a href="renkin.html">食材錬金</a>
        <a href="roulette.html">食材ルーレット</a>
        <a href="ranking.html">ランキング</a>
        <a href="mypage.html">マイページ</a>
        <a href="auth.html">ログイン</a>
    </div>
</nav>
    <h1>マイページ</h1>
    <a href="index.html">← ホームへ戻る</a>
    <div class="container-mypage" style="margin-top:20px;">
        <div class="box">
            <h2>❤️ 保存したレシピ</h2>
            <button onclick="resetFavs()" class="reset-btn">🗑 保存レシピをリセット</button>
            <div id="favs"></div>
        </div>
        <div class="box">
            <h2>🛒 買い物リスト</h2>
            <button onclick="resetShop()" class="reset-btn">🗑 リストをリセット</button>
            <div id="shops"></div>
        </div>
        <div class="box" style="grid-column: 1 / -1;">
            <h2>📦 現在の在庫</h2>
            <div id="stocks"></div>
        </div>
    </div>

<script src="js/main.js"></script>
<script type="module">
  import { auth } from "./js/firebase.js";
  import { onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";

  onAuthStateChanged(auth, (user) => {
    if (!user) {
      location.href = "auth.html"; // 未ログインなら追い返す
    } else {
      // ログイン中のメールをページに表示（任意）
      const nav = document.querySelector(".nav-links a[href='auth.html']");
      if(nav) nav.textContent = user.email; // ナビの「ログイン」をメアドに変える
    }
  });
</script>
</body>
</html>

